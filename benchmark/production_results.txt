# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = true, numSnapshots = 10)

# Run progress: 0.00% complete, ETA 00:02:30
# Fork: 1 of 1
# Warmup Iteration   1: 8.263 us/op
# Warmup Iteration   2: 7.190 us/op
# Warmup Iteration   3: 7.661 us/op
# Warmup Iteration   4: 7.313 us/op
# Warmup Iteration   5: 7.145 us/op
Iteration   1: 7.084 us/op
Iteration   2: 7.156 us/op
Iteration   3: 7.168 us/op
Iteration   4: 7.305 us/op
Iteration   5: 5.976 us/op
Iteration   6: 5.905 us/op
Iteration   7: 8.688 us/op
Iteration   8: 8.663 us/op
Iteration   9: 8.003 us/op
Iteration  10: 7.088 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  7.304 ±(99.9%) 1.435 us/op [Average]
  (min, avg, max) = (5.905, 7.304, 8.688), stdev = 0.949
  CI (99.9%): [5.869, 8.739] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = true, numSnapshots = 50)

# Run progress: 10.00% complete, ETA 00:03:31
# Fork: 1 of 1
# Warmup Iteration   1: 8.445 us/op
# Warmup Iteration   2: 8.219 us/op
# Warmup Iteration   3: 7.533 us/op
# Warmup Iteration   4: 7.057 us/op
# Warmup Iteration   5: 7.047 us/op
Iteration   1: 7.412 us/op
Iteration   2: 6.942 us/op
Iteration   3: 6.970 us/op
Iteration   4: 6.895 us/op
Iteration   5: 7.013 us/op
Iteration   6: 6.989 us/op
Iteration   7: 7.045 us/op
Iteration   8: 7.057 us/op
Iteration   9: 6.943 us/op
Iteration  10: 6.964 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  7.023 ±(99.9%) 0.219 us/op [Average]
  (min, avg, max) = (6.895, 7.023, 7.412), stdev = 0.145
  CI (99.9%): [6.804, 7.242] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = true, numSnapshots = 200)

# Run progress: 20.00% complete, ETA 00:03:23
# Fork: 1 of 1
# Warmup Iteration   1: 7.474 us/op
# Warmup Iteration   2: 6.948 us/op
# Warmup Iteration   3: 7.035 us/op
# Warmup Iteration   4: 6.698 us/op
# Warmup Iteration   5: 6.642 us/op
Iteration   1: 7.170 us/op
Iteration   2: 6.616 us/op
Iteration   3: 6.793 us/op
Iteration   4: 6.622 us/op
Iteration   5: 6.741 us/op
Iteration   6: 6.704 us/op
Iteration   7: 6.709 us/op
Iteration   8: 6.630 us/op
Iteration   9: 6.651 us/op
Iteration  10: 6.745 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  6.738 ±(99.9%) 0.247 us/op [Average]
  (min, avg, max) = (6.616, 6.738, 7.170), stdev = 0.163
  CI (99.9%): [6.491, 6.985] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = true, numSnapshots = 500)

# Run progress: 30.00% complete, ETA 00:03:35
# Fork: 1 of 1
# Warmup Iteration   1: 7.553 us/op
# Warmup Iteration   2: 7.040 us/op
# Warmup Iteration   3: 7.112 us/op
# Warmup Iteration   4: 7.030 us/op
# Warmup Iteration   5: 6.923 us/op
Iteration   1: 6.932 us/op
Iteration   2: 7.253 us/op
Iteration   3: 6.860 us/op
Iteration   4: 7.022 us/op
Iteration   5: 7.156 us/op
Iteration   6: 6.831 us/op
Iteration   7: 6.704 us/op
Iteration   8: 6.637 us/op
Iteration   9: 6.617 us/op
Iteration  10: 6.665 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  6.868 ±(99.9%) 0.336 us/op [Average]
  (min, avg, max) = (6.617, 6.868, 7.253), stdev = 0.222
  CI (99.9%): [6.532, 7.204] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = true, numSnapshots = 1000)

# Run progress: 40.00% complete, ETA 00:04:00
# Fork: 1 of 1
# Warmup Iteration   1: 8.440 us/op
# Warmup Iteration   2: 7.687 us/op
# Warmup Iteration   3: 7.712 us/op
# Warmup Iteration   4: 7.567 us/op
# Warmup Iteration   5: 7.497 us/op
Iteration   1: 7.244 us/op
Iteration   2: 7.505 us/op
Iteration   3: 7.190 us/op
Iteration   4: 7.256 us/op
Iteration   5: 7.229 us/op
Iteration   6: 7.143 us/op
Iteration   7: 7.309 us/op
Iteration   8: 7.281 us/op
Iteration   9: 7.170 us/op
Iteration  10: 7.400 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  7.273 ±(99.9%) 0.166 us/op [Average]
  (min, avg, max) = (7.143, 7.273, 7.505), stdev = 0.110
  CI (99.9%): [7.106, 7.439] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = false, numSnapshots = 10)

# Run progress: 50.00% complete, ETA 00:04:32
# Fork: 1 of 1
# Warmup Iteration   1: 4778.662 us/op
# Warmup Iteration   2: 2886.354 us/op
# Warmup Iteration   3: 2616.113 us/op
# Warmup Iteration   4: 2562.382 us/op
# Warmup Iteration   5: 2377.386 us/op
Iteration   1: 2427.932 us/op
Iteration   2: 2684.241 us/op
Iteration   3: 2915.958 us/op
Iteration   4: 2800.438 us/op
Iteration   5: 2408.410 us/op
Iteration   6: 2301.730 us/op
Iteration   7: 2275.621 us/op
Iteration   8: 2319.915 us/op
Iteration   9: 2312.575 us/op
Iteration  10: 2299.370 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  2474.619 ±(99.9%) 357.002 us/op [Average]
  (min, avg, max) = (2275.621, 2474.619, 2915.958), stdev = 236.135
  CI (99.9%): [2117.617, 2831.621] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = false, numSnapshots = 50)

# Run progress: 60.00% complete, ETA 00:03:14
# Fork: 1 of 1
# Warmup Iteration   1: 17516.819 us/op
# Warmup Iteration   2: 12091.332 us/op
# Warmup Iteration   3: 11479.490 us/op
# Warmup Iteration   4: 10882.872 us/op
# Warmup Iteration   5: 11364.878 us/op
Iteration   1: 10398.102 us/op
Iteration   2: 10310.805 us/op
Iteration   3: 10646.935 us/op
Iteration   4: 10216.592 us/op
Iteration   5: 10188.205 us/op
Iteration   6: 10231.115 us/op
Iteration   7: 10179.113 us/op
Iteration   8: 10212.621 us/op
Iteration   9: 10202.023 us/op
Iteration  10: 10235.226 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  10282.074 ±(99.9%) 218.005 us/op [Average]
  (min, avg, max) = (10179.113, 10282.074, 10646.935), stdev = 144.197
  CI (99.9%): [10064.068, 10500.079] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = false, numSnapshots = 200)

# Run progress: 70.00% complete, ETA 00:02:14
# Fork: 1 of 1
# Warmup Iteration   1: 81630.429 us/op
# Warmup Iteration   2: 64647.375 us/op
# Warmup Iteration   3: 60367.093 us/op
# Warmup Iteration   4: 59396.657 us/op
# Warmup Iteration   5: 57858.840 us/op
Iteration   1: 57216.655 us/op
Iteration   2: 56595.773 us/op
Iteration   3: 56177.690 us/op
Iteration   4: 56234.576 us/op
Iteration   5: 61359.017 us/op
Iteration   6: 57377.801 us/op
Iteration   7: 57287.759 us/op
Iteration   8: 55572.046 us/op
Iteration   9: 56105.780 us/op
Iteration  10: 55997.285 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  56992.438 ±(99.9%) 2496.601 us/op [Average]
  (min, avg, max) = (55572.046, 56992.438, 61359.017), stdev = 1651.347
  CI (99.9%): [54495.837, 59489.039] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = false, numSnapshots = 500)

# Run progress: 80.00% complete, ETA 00:01:27
# Fork: 1 of 1
# Warmup Iteration   1: 213414.658 us/op
# Warmup Iteration   2: 140626.198 us/op
# Warmup Iteration   3: 136016.005 us/op
# Warmup Iteration   4: 133926.130 us/op
# Warmup Iteration   5: 133921.755 us/op
Iteration   1: 129993.604 us/op
Iteration   2: 127580.125 us/op
Iteration   3: 133708.438 us/op
Iteration   4: 130399.651 us/op
Iteration   5: 129993.203 us/op
Iteration   6: 128953.943 us/op
Iteration   7: 120677.116 us/op
Iteration   8: 119962.806 us/op
Iteration   9: 119872.722 us/op
Iteration  10: 124618.560 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  126576.017 ±(99.9%) 7522.388 us/op [Average]
  (min, avg, max) = (119872.722, 126576.017, 133708.438), stdev = 4975.594
  CI (99.9%): [119053.629, 134098.405] (assumes normal distribution)


# JMH version: 1.37
# VM version: JDK 21.0.8, OpenJDK 64-Bit Server VM, 21.0.8+9-LTS
# VM invoker: /Users/ruijingl/.sdkman/candidates/java/21.0.8-zulu/zulu-21.jdk/Contents/Home/bin/java
# VM options: -Xmx32g
# Blackhole mode: compiler (auto-detected, use -Djmh.blackhole.autoDetect=false to disable)
# Warmup: 5 iterations, 1 s each
# Measurement: 10 iterations, 1 s each
# Timeout: 10 min per iteration
# Threads: 1 thread, will synchronize iterations
# Benchmark mode: Average time, time/op
# Benchmark: org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency
# Parameters: (asyncEnabled = false, numSnapshots = 1000)

# Run progress: 90.00% complete, ETA 00:00:45
# Fork: 1 of 1
# Warmup Iteration   1: 695271.146 us/op
# Warmup Iteration   2: 396627.264 us/op
# Warmup Iteration   3: 370019.764 us/op
# Warmup Iteration   4: 363333.764 us/op
# Warmup Iteration   5: 351774.111 us/op
Iteration   1: 359534.778 us/op
Iteration   2: 352544.625 us/op
Iteration   3: 333239.510 us/op
Iteration   4: 327644.531 us/op
Iteration   5: 327631.271 us/op
Iteration   6: 329392.552 us/op
Iteration   7: 333490.958 us/op
Iteration   8: 330410.729 us/op
Iteration   9: 331897.552 us/op
Iteration  10: 330681.281 us/op


Result "org.apache.iceberg.spark.source.MicroBatchPlannerBenchmark.measurePlanningLatency":
  335646.779 ±(99.9%) 16715.313 us/op [Average]
  (min, avg, max) = (327631.271, 335646.779, 359534.778), stdev = 11056.144
  CI (99.9%): [318931.466, 352362.092] (assumes normal distribution)


# Run complete. Total time: 00:08:42

REMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on
why the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial
experiments, perform baseline and negative tests that provide experimental control, make sure
the benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.
Do not assume the numbers tell you what you want them to tell.

NOTE: Current JVM experimentally supports Compiler Blackholes, and they are in use. Please exercise
extra caution when trusting the results, look into the generated code to check the benchmark still
works, and factor in a small probability of new VM bugs. Additionally, while comparisons between
different JVMs are already problematic, the performance difference caused by different Blackhole
modes can be very significant. Please make sure you use the consistent Blackhole mode for comparisons.

Benchmark                                       (asyncEnabled)  (numSnapshots)  Mode  Cnt       Score       Error  Units
MicroBatchPlannerBenchmark.measurePlanningLatency            true              10  avgt   10       7.304 ±     1.435  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency            true              50  avgt   10       7.023 ±     0.219  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency            true             200  avgt   10       6.738 ±     0.247  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency            true             500  avgt   10       6.868 ±     0.336  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency            true            1000  avgt   10       7.273 ±     0.166  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency           false              10  avgt   10    2474.619 ±   357.002  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency           false              50  avgt   10   10282.074 ±   218.005  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency           false             200  avgt   10   56992.438 ±  2496.601  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency           false             500  avgt   10  126576.017 ±  7522.388  us/op
MicroBatchPlannerBenchmark.measurePlanningLatency           false            1000  avgt   10  335646.779 ± 16715.313  us/op

Benchmark result is saved to /Users/ruijingl/iceberg/spark/v4.1/spark/build/reports/jmh/results.json
